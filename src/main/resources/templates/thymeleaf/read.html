<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:id="http://www.w3.org/1999/xhtml">

<head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Hello thymeleaf</title>
    <link rel="stylesheet" th:href="@{/css/board.css}">
    <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
</head>
<body>
<!--<form role="form" method="post" >-->
<!--    <input type="hidden" name="boardNo" value="${BoardVO.boardNo}"/>-->
<!--</form>-->


    <div class="container">
        <p>글번호 : [[${BoardVO.boardNo}]]</p>
        <p>작성자 : [[${BoardVO.userId}]]</p>
        <p>제목 : [[${BoardVO.boardTitle}]]</p>
        <p>내용 : [[${BoardVO.boardContents}]]</p>
        <button th:onclick="deleteBoard([[${BoardVO.boardNo}]])">삭제하기</button>
        <button th:onclick="modifyBoard([[${BoardVO.boardNo}]])">수정하기</button>
    </div>
    <div id="result">
        <p>댓글번호:[[$data.replyNo]]</p>
        <p>댓글:[[$data.replyContents]]</p>
        <p>댓글러:[[$data.replyWriter]]</p>
    </div>




<!-- Reply List {s}-->

<div class="my-3 p-3 bg-white rounded shadow-sm" style="padding-top: 10px">

    <h6 class="border-bottom pb-2 mb-0">Reply list</h6>

    <div id="replyList"></div>

</div>

<!-- Reply List {e}-->
<script>

//    $(document).ready(function () {
//        var boardNo = "${BoardVO.boardNo}";
//    })
//    var boardNo = 11;
//    $.getJSON("/all/" + boardNo, function (data){
//        console.log("결과는 =" + JSON.stringify(data));
//        document.getElementById("result").innerHTML = JSON.parse(data)
//
//    });

// 이전 코드 생략

function showReplyList(){

    var url = "/replies/replylist";

    var paramData = {"boardNo" : "${BoardVO.boardNo}"};

    $.ajax({

        type: 'GET',

        url: url,

        data: paramData,

        dataType: 'json',

        success: function(result) {

            var htmls = "";

            if(result.length < 1){

                htmls.push("등록된 댓글이 없습니다.");

            } else {

                $(result).each(function(){
                    htmls += this.replyContents;

                });	//each end



            }

            $("#replyList").html(htmls);



        }	   // Ajax success end

    });	// Ajax end

}
</script>


<script>
    function deleteBoard(boardNo){
        if (boardNo != null){
            $(location).attr('href','/delete?boardNo='+boardNo);
        }
    }

    function modifyBoard(boardNo){
        if (boardNo != null){
            $(location).attr('href','/update?boardNo='+boardNo)
        }
    }

</script>
</body>

</html>